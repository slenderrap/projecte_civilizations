/*drop table Civilization_stats;
drop table attack_units_stats;
drop table defense_units_stats;
drop table special_units_stats;
drop table Civilization_attack_stats;
drop table Civilization_defense_stats;
drop table Civilization_special_stats;
drop table Enemy_attack_stats;
drop table Battle_log;
drop table Battle_stats;
drop table Civilization_stats;
*/


CREATE TABLE Civilization_stats(
id_civilization number(3) generated by default as identity minvalue 1,
"name" varchar2(100),
wood_amount number(10) default 0, 
iron_amount number(10) default 0,
food_amount number(10) default 0,
mana_amount number(10) default 0,
magicTower_counter number(3) default 0,
church_counter number(3) default 0,
farm_counter number(3) default 0,
smithy_counter number(3) default 0,
carpentry_counter number(3) default 0,
technology_defense_level number(3) default 1, 
technology_attack_level number(3) default 1, 
battles_counter number(3) default 0,
CONSTRAINT pk_id_civil_stats primary key (id_civilization)
);


CREATE TABLE attack_units_stats(
id_civilization number(3) not null,
unit_id number(4) generated by default as identity minvalue 1, 
type varchar(10) check (type in ('Swordsman','Spearman','Crossbow','Cannon')),
armor number(7),
base_damage number(7),
experience number(3),
sanctified number(1) default 0 check(sanctified in (0,1)),
CONSTRAINT pk_a_u_stats primary key (id_civilization,unit_id),
CONSTRAINT fk_a_u_stats_civil foreign key (id_civilization) references Civilization_stats(id_civilization));
CREATE TABLE Civilization_stats(
id_civilization number(3) generated by default as identity minvalue 1,
"name" varchar2(100),
wood_amount number(10) default 0, 
iron_amount number(10) default 0,
food_amount number(10) default 0,
mana_amount number(10) default 0,
magicTower_counter number(3) default 0,
church_counter number(3) default 0,
farm_counter number(3) default 0,
smithy_counter number(3) default 0,
carpentry_counter number(3) default 0,
technology_defense_level number(3) default 1, 
technology_attack_level number(3) default 1, 
battles_counter number(3) default 0,
CONSTRAINT pk_id_civil_stats primary key (id_civilization)
);


CREATE TABLE defense_units_stats(   
id_civilization number(3) not null,
unit_id number(4) generated by default as identity minvalue 1, 
type varchar(20) check (type in ('ArrowTower','Catapult','RocketLauncherTower')),
armor number(7),
base_damage number(7),
experience number(3),
sanctified number(1) default 0 check(sanctified in (0,1)),
CONSTRAINT pk_d_u_stats primary key (id_civilization,unit_id),
CONSTRAINT fk_d_u_stats_civil foreign key (id_civilization) references Civilization_stats(id_civilization));

CREATE TABLE special_units_stats(   
id_civilization number(3) not null,
unit_id number(4) generated by default as identity minvalue 1, 
type varchar(10) check (type in ('Magician','Priest')),
armor number(7),
base_damage number(7),
experience number(7),
CONSTRAINT pk_a_s_stats primary key (id_civilization,unit_id),
CONSTRAINT fk_a_s_stats_civil foreign key (id_civilization) references Civilization_stats(id_civilization));


CREATE TABLE Battle_stats(
id_civilization number(3) not null,
num_battle number(3) not null,
wood_acquired number(10) ,
iron_acquired number(10),
CONSTRAINT pk_battle_stats primary key (id_civilization, num_battle),
CONSTRAINT fk_b_Stats_civil foreign key (id_civilization) references Civilization_stats(id_civilization)
);


CREATE TABLE Civilization_attack_stats(
id_civilization number(3) not null,
num_battle number(3) not null,
type varchar(10) check (type in ('Swordsman','Spearman','Crossbow','Cannon')) not null,
"initial" number(3),
drops number(3),
CONSTRAINT pk_c_a_stats primary key (id_civilization,num_battle,type),
CONSTRAINT fk_battle_stats_c_attack foreign key (id_civilization,num_battle) references Battle_stats(id_civilization,num_battle)
);

CREATE TABLE Civilization_defense_stats(
id_civilization number(3) not null,
num_battle number(3) not null,
type varchar(20) check (type in ('ArrowTower','Catapult','RocketLauncherTower')) not null,
"initial" number(3),
drops number(3),
CONSTRAINT pk_c_d_stats primary key (id_civilization,num_battle,type),
CONSTRAINT fk_battle_stats_c_defense foreign key (id_civilization,num_battle) references Battle_stats(id_civilization,num_battle)
);

CREATE TABLE Civilization_special_stats(
id_civilization number(3) not null,
num_battle number(3) not null,
type varchar(10) check (type in ('Magician','Priest')) not null,
"initial" number(3),
drops number(3),
CONSTRAINT pk_c_s_stats primary key (id_civilization,num_battle,type),
CONSTRAINT fk_battle_stats_c_special foreign key (id_civilization,num_battle) references Battle_stats(id_civilization,num_battle)
);

CREATE TABLE Enemy_attack_stats(
id_civilization number(3) not null,
num_battle number(3) not null,
type varchar(10) check (type in ('Swordsman','Spearman','Crossbow','Cannon')) not null,
"initial" number(3),
drops number(3),
CONSTRAINT pk_e_a_stats primary key (id_civilization,num_battle,type),
CONSTRAINT fk_battle_stats_e_attack foreign key (id_civilization,num_battle) references Battle_stats(id_civilization,num_battle)
);


CREATE TABLE Battle_log(
id_civilization number(3) not null,
num_battle number(3) not null,
num_line number(3) not null,
log_entry varchar2(500),
CONSTRAINT pk_battle_log primary key (id_civilization, num_battle,num_line),
CONSTRAINT fk_num_battle foreign key (id_civilization,num_battle) references Battle_stats(id_civilization,num_battle)
);
